{
   "domain": {
      "service": "service",
      "subservice": "/subservice"
   },
   "contextBroker": {
      "protocol": "http",
      "host": "1.2.3.4",
      "port": 1026,
      "ngsiVersion": "1.0"
   },
   "authentication": {
      "protocol": "http",
      "host": "1.2.3.4",
      "port": 5001,
      "user": "user",
      "password": "password",
      "retry": {
         "times": 10,
         "interval": 5000
      },
      "provider": "keystone"
   },
   "entities": [
      {
         "entity_name": "begonia-01",
         "entity_type": "ht_6",
         "schedule": "26 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.52242592179049, -3.643003092282297); var hour = now.getUTCHours(); var ret = 0; if('${{begonia-01:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{begonia-01:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (8 - 6.4) + 6.4; } else if ('${{begonia-01:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (14.4 - 12.8) + 12.8; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (8 - 6.4) + 6.4; } else { ret = Math.random() * (14.4 - 12.8) + 12.8; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'begonia-01' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['begonia-01'].totalActivePower) };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['begonia-01'].totalActivePower) };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.52242592179049, -3.643003092282297); var ret = 0; if('${{begonia-01:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{begonia-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{begonia-01:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.52242592179049, -3.643003092282297); var hour = now.getUTCHours(); var ret = 0; if('${{begonia-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{begonia-01:#:ht_6}{lastCommand}}' !== 'OFF' && '${{begonia-01:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "26 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.52242592179049, -3.643003092282297); var lastCommandTimestamp = new Date('${{begonia-01:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{begonia-01:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.52242592179049, -3.643003092282297).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.52242592179049, -3.643003092282297).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.643003092282297,
                     40.52242592179049
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "camino-nuevo-01",
         "entity_type": "ht_6",
         "schedule": "6 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51794808770004, -3.649892473544252); var hour = now.getUTCHours(); var ret = 0; if('${{camino-nuevo-01:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{camino-nuevo-01:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (11 - 8.8) + 8.8; } else if ('${{camino-nuevo-01:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (19.8 - 17.6) + 17.6; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (11 - 8.8) + 8.8; } else { ret = Math.random() * (19.8 - 17.6) + 17.6; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'camino-nuevo-01' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['camino-nuevo-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['camino-nuevo-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51794808770004, -3.649892473544252); var ret = 0; if('${{camino-nuevo-01:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{camino-nuevo-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{camino-nuevo-01:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51794808770004, -3.649892473544252); var hour = now.getUTCHours(); var ret = 0; if('${{camino-nuevo-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{camino-nuevo-01:#:ht_6}{lastCommand}}' !== 'OFF' && '${{camino-nuevo-01:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "6 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51794808770004, -3.649892473544252); var lastCommandTimestamp = new Date('${{camino-nuevo-01:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{camino-nuevo-01:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.51794808770004, -3.649892473544252).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.51794808770004, -3.649892473544252).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
             }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.649892473544252,
                     40.51794808770004
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "azalea-01",
         "entity_type": "ht_6",
         "schedule": "20 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.52699570078362, -3.642685695313588); var hour = now.getUTCHours(); var ret = 0; if('${{azalea-01:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{azalea-01:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (4 - 3.2) + 3.2; } else if ('${{azalea-01:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (7.2 - 6.4) + 6.4; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (4 - 3.2) + 3.2; } else { ret = Math.random() * (7.2 - 6.4) + 6.4; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'azalea-01' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['azalea-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['azalea-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.52699570078362, -3.642685695313588); var ret = 0; if('${{azalea-01:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{azalea-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{azalea-01:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.52699570078362, -3.642685695313588); var hour = now.getUTCHours(); var ret = 0; if('${{azalea-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{azalea-01:#:ht_6}{lastCommand}}' !== 'OFF' && '${{azalea-01:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "20 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.52699570078362, -3.642685695313588); var lastCommandTimestamp = new Date('${{azalea-01:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{azalea-01:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.52699570078362, -3.642685695313588).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.52699570078362, -3.642685695313588).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.642685695313588,
                     40.52699570078362
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "golf-park-01",
         "entity_type": "ht_6",
         "schedule": "21 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.519631745827674, -3.657465658569671); var hour = now.getUTCHours(); var ret = 0; if('${{golf-park-01:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{golf-park-01:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (5.5 - 4.4) + 4.4; } else if ('${{golf-park-01:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (9.9 - 8.8) + 8.8; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (5.5 - 4.4) + 4.4; } else { ret = Math.random() * (9.9 - 8.8) + 8.8; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'golf-park-01' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['golf-park-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['golf-park-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.519631745827674, -3.657465658569671); var ret = 0; if('${{golf-park-01:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{golf-park-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{golf-park-01:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.519631745827674, -3.657465658569671); var hour = now.getUTCHours(); var ret = 0; if('${{golf-park-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{golf-park-01:#:ht_6}{lastCommand}}' !== 'OFF' && '${{golf-park-01:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "21 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.519631745827674, -3.657465658569671); var lastCommandTimestamp = new Date('${{golf-park-01:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{golf-park-01:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.519631745827674, -3.657465658569671).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.519631745827674, -3.657465658569671).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.657465658569671,
                     40.519631745827674
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "europa-01",
         "entity_type": "ht_6",
         "schedule": "8 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51469419653811, -3.65722294324066); var hour = now.getUTCHours(); var ret = 0; if('${{europa-01:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{europa-01:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (4.5 - 3.6) + 3.6; } else if ('${{europa-01:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (8.1 - 7.2) + 7.2; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (4.5 - 3.6) + 3.6; } else { ret = Math.random() * (8.1 - 7.2) + 7.2; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'europa-01' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['europa-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['europa-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51469419653811, -3.65722294324066); var ret = 0; if('${{europa-01:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{europa-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{europa-01:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51469419653811, -3.65722294324066); var hour = now.getUTCHours(); var ret = 0; if('${{europa-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{europa-01:#:ht_6}{lastCommand}}' !== 'OFF' && '${{europa-01:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "8 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51469419653811, -3.65722294324066); var lastCommandTimestamp = new Date('${{begonia-01:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{begonia-01:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.51469419653811, -3.65722294324066).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.51469419653811, -3.65722294324066).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.65722294324066,
                     40.51469419653811
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "francisco-chico-mendes-01",
         "entity_type": "ht_6",
         "schedule": "14 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.524898892116674, -3.653502864063304); var hour = now.getUTCHours(); var ret = 0; if('${{francisco-chico-mendes-01:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{francisco-chico-mendes-01:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (5 - 4) + 4; } else if ('${{francisco-chico-mendes-01:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (9 - 8) + 8; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (5 - 4) + 4; } else { ret = Math.random() * (9 - 8) + 8; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'francisco-chico-mendes-01' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['francisco-chico-mendes-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['francisco-chico-mendes-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.524898892116674, -3.653502864063304); var ret = 0; if('${{francisco-chico-mendes-01:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{francisco-chico-mendes-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{francisco-chico-mendes-01:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.524898892116674, -3.653502864063304); var hour = now.getUTCHours(); var ret = 0; if('${{francisco-chico-mendes-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{francisco-chico-mendes-01:#:ht_6}{lastCommand}}' !== 'OFF' && '${{francisco-chico-mendes-01:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "14 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.524898892116674, -3.653502864063304); var lastCommandTimestamp = new Date('${{francisco-chico-mendes-01:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{francisco-chico-mendes-01:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.524898892116674, -3.653502864063304).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.524898892116674, -3.653502864063304).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.653502864063304,
                     40.524898892116674
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "dt-01",
         "entity_type": "ht_6",
         "schedule": "29 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51672096330546, -3.665466169588206); var hour = now.getUTCHours(); var ret = 0; if('${{dt-01:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{dt-01:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (9 - 7.2) + 7.2; } else if ('${{dt-01:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (16.2 - 14.4) + 14.4; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (9 - 7.2) + 7.2; } else { ret = Math.random() * (16.2 - 14.4) + 14.4; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'dt-01' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['dt-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['dt-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51672096330546, -3.665466169588206); var ret = 0; if('${{dt-01:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{dt-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{dt-01:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51672096330546, -3.665466169588206); var hour = now.getUTCHours(); var ret = 0; if('${{dt-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{dt-01:#:ht_6}{lastCommand}}' !== 'OFF' && '${{dt-01:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "29 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51672096330546, -3.665466169588206); var lastCommandTimestamp = new Date('${{dt-01:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{dt-01:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.51672096330546, -3.665466169588206).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.51672096330546, -3.665466169588206).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.665466169588206,
                     40.51672096330546
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "industria-01",
         "entity_type": "ht_6",
         "schedule": "1 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.53356709264383, -3.656756358856621); var hour = now.getUTCHours(); var ret = 0; if('${{industria-01:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{industria-01:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (5.5 - 4.4) + 4.4; } else if ('${{industria-01:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (9.9 - 8.8) + 8.8; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (5.5 - 4.4) + 4.4; } else { ret = Math.random() * (9.9 - 8.8) + 8.8; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'industria-01' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['industria-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['industria-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.53356709264383, -3.656756358856621); var ret = 0; if('${{industria-01:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{industria-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{industria-01:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.53356709264383, -3.656756358856621); var hour = now.getUTCHours(); var ret = 0; if('${{industria-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{industria-01:#:ht_6}{lastCommand}}' !== 'OFF' && '${{industria-01:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "1 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.53356709264383, -3.656756358856621); var lastCommandTimestamp = new Date('${{industria-01:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{industria-01:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.53356709264383, -3.656756358856621).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.53356709264383, -3.656756358856621).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.656756358856621,
                     40.53356709264383
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "la-granja-01",
         "entity_type": "ht_6",
         "schedule": "5 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.52730415182928, -3.658955217203828); var hour = now.getUTCHours(); var ret = 0; if('${{la-granja-01:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{la-granja-01:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (4 - 3.2) + 3.2; } else if ('${{la-granja-01:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (7.2 - 6.4) + 6.4; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (4 - 3.2) + 3.2; } else { ret = Math.random() * (7.2 - 6.4) + 6.4; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'la-granja-01' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['la-granja-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['la-granja-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.52730415182928, -3.658955217203828); var ret = 0; if('${{la-granja-01:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{la-granja-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{la-granja-01:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.52730415182928, -3.658955217203828); var hour = now.getUTCHours(); var ret = 0; if('${{la-granja-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{la-granja-01:#:ht_6}{lastCommand}}' !== 'OFF' && '${{la-granja-01:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "5 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.52730415182928, -3.658955217203828); var lastCommandTimestamp = new Date('${{la-granja-01:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{la-granja-01:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.52730415182928, -3.658955217203828).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.52730415182928, -3.658955217203828).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.658955217203828,
                     40.52730415182928
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "sepulveda-01",
         "entity_type": "ht_6",
         "schedule": "30 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.528785945844135, -3.653356062443416); var hour = now.getUTCHours(); var ret = 0; if('${{sepulveda-01:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{sepulveda-01:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (9 - 7.2) + 7.2; } else if ('${{sepulveda-01:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (16.2 - 14.4) + 14.4; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (9 - 7.2) + 7.2; } else { ret = Math.random() * (16.2 - 14.4) + 14.4; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'sepulveda-01' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['sepulveda-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['sepulveda-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.528785945844135, -3.653356062443416); var ret = 0; if('${{sepulveda-01:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{sepulveda-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{sepulveda-01:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.528785945844135, -3.653356062443416); var hour = now.getUTCHours(); var ret = 0; if('${{sepulveda-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{sepulveda-01:#:ht_6}{lastCommand}}' !== 'OFF' && '${{sepulveda-01:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "30 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.528785945844135, -3.653356062443416); var lastCommandTimestamp = new Date('${{sepulveda-01:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{sepulveda-01:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.528785945844135, -3.653356062443416).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.528785945844135, -3.653356062443416).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.653356062443416,
                     40.528785945844135
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "calendula-01",
         "entity_type": "ht_6",
         "schedule": "13 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.52695092865284, -3.645592052299929); var hour = now.getUTCHours(); var ret = 0; if('${{calendula-01:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{calendula-01:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (7.5 - 6) + 6; } else if ('${{calendula-01:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (13.5 - 12) + 12; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (7.5 - 6) + 6; } else { ret = Math.random() * (13.5 - 12) + 12; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'calendula-01' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['calendula-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['calendula-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.52695092865284, -3.645592052299929); var ret = 0; if('${{calendula-01:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{calendula-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{calendula-01:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.52695092865284, -3.645592052299929); var hour = now.getUTCHours(); var ret = 0; if('${{calendula-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{calendula-01:#:ht_6}{lastCommand}}' !== 'OFF' && '${{calendula-01:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "13 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.52695092865284, -3.645592052299929); var lastCommandTimestamp = new Date('${{calendula-01:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{calendula-01:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.52695092865284, -3.645592052299929).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.52695092865284, -3.645592052299929).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.645592052299929,
                     40.52695092865284
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "centro-comercial-01",
         "entity_type": "ht_6",
         "schedule": "25 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.52859641587884, -3.649717745281285); var hour = now.getUTCHours(); var ret = 0; if('${{centro-comercial-01:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{centro-comercial-01:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (6.5 - 5.2) + 5.2; } else if ('${{centro-comercial-01:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (11.700000000000001 - 10.4) + 10.4; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (6.5 - 5.2) + 5.2; } else { ret = Math.random() * (11.700000000000001 - 10.4) + 10.4; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'centro-comercial-01' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['centro-comercial-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['centro-comercial-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.52859641587884, -3.649717745281285); var ret = 0; if('${{centro-comercial-01:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{centro-comercial-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{centro-comercial-01:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.52859641587884, -3.649717745281285); var hour = now.getUTCHours(); var ret = 0; if('${{centro-comercial-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{centro-comercial-01:#:ht_6}{lastCommand}}' !== 'OFF' && '${{centro-comercial-01:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "25 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.52859641587884, -3.649717745281285); var lastCommandTimestamp = new Date('${{centro-comercial-01:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{centro-comercial-01:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.52859641587884, -3.649717745281285).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.52859641587884, -3.649717745281285).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.649717745281285,
                     40.52859641587884
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "europa-02",
         "entity_type": "ht_6",
         "schedule": "17 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.519868723073934, -3.660656533009791); var hour = now.getUTCHours(); var ret = 0; if('${{europa-02:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{europa-02:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (5 - 4) + 4; } else if ('${{europa-02:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (9 - 8) + 8; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (5 - 4) + 4; } else { ret = Math.random() * (9 - 8) + 8; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'europa-02' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['europa-02'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['europa-02'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.519868723073934, -3.660656533009791); var ret = 0; if('${{europa-02:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{europa-02:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{europa-02:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.519868723073934, -3.660656533009791); var hour = now.getUTCHours(); var ret = 0; if('${{europa-02:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{europa-02:#:ht_6}{lastCommand}}' !== 'OFF' && '${{europa-02:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "17 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.519868723073934, -3.660656533009791); var lastCommandTimestamp = new Date('${{europa-02:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{europa-02:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.519868723073934, -3.660656533009791).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.519868723073934, -3.660656533009791).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.660656533009791,
                     40.519868723073934
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "parques-01",
         "entity_type": "ht_6",
         "schedule": "16 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51332271353841, -3.654519388050461); var hour = now.getUTCHours(); var ret = 0; if('${{parques-01:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{parques-01:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (8.5 - 6.800000000000001) + 6.800000000000001; } else if ('${{parques-01:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (15.3 - 13.600000000000001) + 13.600000000000001; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (8.5 - 6.800000000000001) + 6.800000000000001; } else { ret = Math.random() * (15.3 - 13.600000000000001) + 13.600000000000001; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'parques-01' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['parques-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['parques-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51332271353841, -3.654519388050461); var ret = 0; if('${{parques-01:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{parques-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{parques-01:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51332271353841, -3.654519388050461); var hour = now.getUTCHours(); var ret = 0; if('${{parques-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{parques-01:#:ht_6}{lastCommand}}' !== 'OFF' && '${{parques-01:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "16 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51332271353841, -3.654519388050461); var lastCommandTimestamp = new Date('${{parques-01:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{parques-01:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.51332271353841, -3.654519388050461).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.51332271353841, -3.654519388050461).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.654519388050461,
                     40.51332271353841
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "conde-de-gaitanes-01",
         "entity_type": "ht_6",
         "schedule": "28 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51586100086436, -3.650336871040029); var hour = now.getUTCHours(); var ret = 0; if('${{conde-de-gaitanes-01:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{conde-de-gaitanes-01:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (4 - 3.2) + 3.2; } else if ('${{conde-de-gaitanes-01:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (7.2 - 6.4) + 6.4; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (4 - 3.2) + 3.2; } else { ret = Math.random() * (7.2 - 6.4) + 6.4; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'conde-de-gaitanes-01' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['conde-de-gaitanes-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['conde-de-gaitanes-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51586100086436, -3.650336871040029); var ret = 0; if('${{conde-de-gaitanes-01:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{conde-de-gaitanes-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{conde-de-gaitanes-01:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51586100086436, -3.650336871040029); var hour = now.getUTCHours(); var ret = 0; if('${{conde-de-gaitanes-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{conde-de-gaitanes-01:#:ht_6}{lastCommand}}' !== 'OFF' && '${{conde-de-gaitanes-01:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "28 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51586100086436, -3.650336871040029); var lastCommandTimestamp = new Date('${{conde-de-gaitanes-01:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{conde-de-gaitanes-01:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.51586100086436, -3.650336871040029).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.51586100086436, -3.650336871040029).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.650336871040029,
                     40.51586100086436
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "aragoneses-01",
         "entity_type": "ht_6",
         "schedule": "11 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.522479912661076, -3.662244919883699); var hour = now.getUTCHours(); var ret = 0; if('${{aragoneses-01:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{aragoneses-01:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (2.5 - 2) + 2; } else if ('${{aragoneses-01:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (4.5 - 4) + 4; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (2.5 - 2) + 2; } else { ret = Math.random() * (4.5 - 4) + 4; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'aragoneses-01' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['aragoneses-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['aragoneses-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.522479912661076, -3.662244919883699); var ret = 0; if('${{aragoneses-01:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{aragoneses-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{aragoneses-01:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.522479912661076, -3.662244919883699); var hour = now.getUTCHours(); var ret = 0; if('${{aragoneses-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{aragoneses-01:#:ht_6}{lastCommand}}' !== 'OFF' && '${{aragoneses-01:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "11 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.522479912661076, -3.662244919883699); var lastCommandTimestamp = new Date('${{aragoneses-01:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{aragoneses-01:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.522479912661076, -3.662244919883699).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.522479912661076, -3.662244919883699).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.662244919883699,
                     40.522479912661076
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "cuestablanca-01",
         "entity_type": "ht_6",
         "schedule": "7 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.521636884875946, -3.655658015449564); var hour = now.getUTCHours(); var ret = 0; if('${{cuestablanca-01:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{cuestablanca-01:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (12 - 9.600000000000001) + 9.600000000000001; } else if ('${{cuestablanca-01:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (21.6 - 19.200000000000003) + 19.200000000000003; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (12 - 9.600000000000001) + 9.600000000000001; } else { ret = Math.random() * (21.6 - 19.200000000000003) + 19.200000000000003; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'cuestablanca-01' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['cuestablanca-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['cuestablanca-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.521636884875946, -3.655658015449564); var ret = 0; if('${{cuestablanca-01:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{cuestablanca-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{cuestablanca-01:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.521636884875946, -3.655658015449564); var hour = now.getUTCHours(); var ret = 0; if('${{cuestablanca-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{cuestablanca-01:#:ht_6}{lastCommand}}' !== 'OFF' && '${{cuestablanca-01:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "7 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.521636884875946, -3.655658015449564); var lastCommandTimestamp = new Date('${{cuestablanca-01:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{cuestablanca-01:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.521636884875946, -3.655658015449564).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.521636884875946, -3.655658015449564).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.655658015449564,
                     40.521636884875946
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "azalea-02",
         "entity_type": "ht_6",
         "schedule": "12 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.521338842213176, -3.649138324325982); var hour = now.getUTCHours(); var ret = 0; if('${{azalea-02:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{azalea-02:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (8.5 - 6.800000000000001) + 6.800000000000001; } else if ('${{azalea-02:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (15.3 - 13.600000000000001) + 13.600000000000001; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (8.5 - 6.800000000000001) + 6.800000000000001; } else { ret = Math.random() * (15.3 - 13.600000000000001) + 13.600000000000001; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'azalea-02' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['azalea-02'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['azalea-02'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.521338842213176, -3.649138324325982); var ret = 0; if('${{azalea-02:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{azalea-02:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{azalea-02:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.521338842213176, -3.649138324325982); var hour = now.getUTCHours(); var ret = 0; if('${{azalea-02:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{azalea-02:#:ht_6}{lastCommand}}' !== 'OFF' && '${{azalea-02:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "12 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.521338842213176, -3.649138324325982); var lastCommandTimestamp = new Date('${{azalea-02:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{azalea-02:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.521338842213176, -3.649138324325982).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.521338842213176, -3.649138324325982).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.649138324325982,
                     40.521338842213176
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "ligonde-01",
         "entity_type": "ht_6",
         "schedule": "27 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51179140026885, -3.667760386740123); var hour = now.getUTCHours(); var ret = 0; if('${{ligonde-01:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{ligonde-01:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (7 - 5.6000000000000005) + 5.6000000000000005; } else if ('${{ligonde-01:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (12.6 - 11.200000000000001) + 11.200000000000001; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (7 - 5.6000000000000005) + 5.6000000000000005; } else { ret = Math.random() * (12.6 - 11.200000000000001) + 11.200000000000001; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'ligonde-01' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['ligonde-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['ligonde-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51179140026885, -3.667760386740123); var ret = 0; if('${{ligonde-01:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{ligonde-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{ligonde-01:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51179140026885, -3.667760386740123); var hour = now.getUTCHours(); var ret = 0; if('${{ligonde-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{ligonde-01:#:ht_6}{lastCommand}}' !== 'OFF' && '${{ligonde-01:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "27 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51179140026885, -3.667760386740123); var lastCommandTimestamp = new Date('${{ligonde-01:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{ligonde-01:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.51179140026885, -3.667760386740123).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.51179140026885, -3.667760386740123).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.667760386740123,
                     40.51179140026885
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "cebreiro-01",
         "entity_type": "ht_6",
         "schedule": "28 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.506352919140106, -3.660029319777114); var hour = now.getUTCHours(); var ret = 0; if('${{cebreiro-01:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{cebreiro-01:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (9 - 7.2) + 7.2; } else if ('${{cebreiro-01:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (16.2 - 14.4) + 14.4; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (9 - 7.2) + 7.2; } else { ret = Math.random() * (16.2 - 14.4) + 14.4; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'cebreiro-01' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['cebreiro-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['cebreiro-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.506352919140106, -3.660029319777114); var ret = 0; if('${{cebreiro-01:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{cebreiro-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{cebreiro-01:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.506352919140106, -3.660029319777114); var hour = now.getUTCHours(); var ret = 0; if('${{cebreiro-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{cebreiro-01:#:ht_6}{lastCommand}}' !== 'OFF' && '${{cebreiro-01:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "28 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.506352919140106, -3.660029319777114); var lastCommandTimestamp = new Date('${{cebreiro-01:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{cebreiro-01:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.506352919140106, -3.660029319777114).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.506352919140106, -3.660029319777114).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.660029319777114,
                     40.506352919140106
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "tierra-de-melide-01",
         "entity_type": "ht_6",
         "schedule": "19 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.508581729532594, -3.666852063785858); var hour = now.getUTCHours(); var ret = 0; if('${{tierra-de-melide-01:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{tierra-de-melide-01:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (4.5 - 3.6) + 3.6; } else if ('${{tierra-de-melide-01:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (8.1 - 7.2) + 7.2; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (4.5 - 3.6) + 3.6; } else { ret = Math.random() * (8.1 - 7.2) + 7.2; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'tierra-de-melide-01' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['tierra-de-melide-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['tierra-de-melide-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.508581729532594, -3.666852063785858); var ret = 0; if('${{tierra-de-melide-01:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{tierra-de-melide-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{tierra-de-melide-01:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.508581729532594, -3.666852063785858); var hour = now.getUTCHours(); var ret = 0; if('${{tierra-de-melide-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{tierra-de-melide-01:#:ht_6}{lastCommand}}' !== 'OFF' && '${{tierra-de-melide-01:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "19 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.508581729532594, -3.666852063785858); var lastCommandTimestamp = new Date('${{tierra-de-melide-01:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{tierra-de-melide-01:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.508581729532594, -3.666852063785858).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.508581729532594, -3.666852063785858).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.666852063785858,
                     40.508581729532594
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "maria-tubau",
         "entity_type": "ht_6",
         "schedule": "23 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51394155830268, -3.672302001511451); var hour = now.getUTCHours(); var ret = 0; if('${{maria-tubau:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{maria-tubau:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (3 - 2.4000000000000004) + 2.4000000000000004; } else if ('${{maria-tubau:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (5.4 - 4.800000000000001) + 4.800000000000001; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (3 - 2.4000000000000004) + 2.4000000000000004; } else { ret = Math.random() * (5.4 - 4.800000000000001) + 4.800000000000001; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'maria-tubau' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['maria-tubau'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['maria-tubau'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51394155830268, -3.672302001511451); var ret = 0; if('${{maria-tubau:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{maria-tubau:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{maria-tubau:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51394155830268, -3.672302001511451); var hour = now.getUTCHours(); var ret = 0; if('${{maria-tubau:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{maria-tubau:#:ht_6}{lastCommand}}' !== 'OFF' && '${{maria-tubau:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "23 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51394155830268, -3.672302001511451); var lastCommandTimestamp = new Date('${{maria-tubau:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{maria-tubau:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.51394155830268, -3.672302001511451).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.51394155830268, -3.672302001511451).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.672302001511451,
                     40.51394155830268
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "dt-02",
         "entity_type": "ht_6",
         "schedule": "6 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.512069176040505, -3.661819547049333); var hour = now.getUTCHours(); var ret = 0; if('${{dt-02:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{dt-02:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (4.5 - 3.6) + 3.6; } else if ('${{dt-02:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (8.1 - 7.2) + 7.2; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (4.5 - 3.6) + 3.6; } else { ret = Math.random() * (8.1 - 7.2) + 7.2; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'dt-02' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['dt-02'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['dt-02'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.512069176040505, -3.661819547049333); var ret = 0; if('${{dt-02:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{dt-02:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{dt-02:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.512069176040505, -3.661819547049333); var hour = now.getUTCHours(); var ret = 0; if('${{dt-02:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{dt-02:#:ht_6}{lastCommand}}' !== 'OFF' && '${{dt-02:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "6 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.512069176040505, -3.661819547049333); var lastCommandTimestamp = new Date('${{dt-02:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{dt-02:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.512069176040505, -3.661819547049333).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.512069176040505, -3.661819547049333).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.661819547049333,
                     40.512069176040505
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "camino-del-cura-01",
         "entity_type": "ht_6",
         "schedule": "17 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51072515448056, -3.649031778988432); var hour = now.getUTCHours(); var ret = 0; if('${{camino-del-cura-01:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{camino-del-cura-01:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (6 - 4.800000000000001) + 4.800000000000001; } else if ('${{camino-del-cura-01:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (10.8 - 9.600000000000001) + 9.600000000000001; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (6 - 4.800000000000001) + 4.800000000000001; } else { ret = Math.random() * (10.8 - 9.600000000000001) + 9.600000000000001; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'camino-del-cura-01' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['camino-del-cura-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['camino-del-cura-01'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51072515448056, -3.649031778988432); var ret = 0; if('${{camino-del-cura-01:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{camino-del-cura-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{camino-del-cura-01:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51072515448056, -3.649031778988432); var hour = now.getUTCHours(); var ret = 0; if('${{camino-del-cura-01:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{camino-del-cura-01:#:ht_6}{lastCommand}}' !== 'OFF' && '${{camino-del-cura-01:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "17 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.51072515448056, -3.649031778988432); var lastCommandTimestamp = new Date('${{camino-del-cura-01:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{camino-del-cura-01:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.51072515448056, -3.649031778988432).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.51072515448056, -3.649031778988432).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.649031778988432,
                     40.51072515448056
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      },
      {
         "entity_name": "centro-comercial-02",
         "entity_type": "ht_6",
         "schedule": "8 */15 * * * *",
         "active": [
            {
               "name": "totalActivePower",
               "type": "Number",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.525877953687136, -3.657102781928411); var hour = now.getUTCHours(); var ret = 0; if('${{centro-comercial-02:#:ht_6}{lastCommand}}' === 'OFF') { ret = Math.random() * (0 - 0) + 0; } else if ('${{centro-comercial-02:#:ht_6}{lastCommand}}' === 'REDUCIDA') { ret = Math.random() * (6 - 4.800000000000001) + 4.800000000000001; } else if ('${{centro-comercial-02:#:ht_6}{lastCommand}}' === 'GENERAL') { ret = Math.random() * (10.8 - 9.600000000000001) + 9.600000000000001; } else if (now > ts.sunrise && now < ts.sunset) { ret = Math.random() * (0 - 0) + 0; } else if (hour >= 22 || hour <= 4) { ret = Math.random() * (6 - 4.800000000000001) + 4.800000000000001; } else { ret = Math.random() * (10.8 - 9.600000000000001) + 9.600000000000001; } ; return ret; }; var r = f(); module.exports = { result: r, state: { globals: { 'centro-comercial-02' : { totalActivePower: r } } } };)",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  }
               ]
            },
            {
               "name": "energyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return 0.25*b; }; module.exports = { result: f(global['centro-comercial-02'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "reactiveEnergyConsumed",
               "type": "Number",
               "value": "attribute-function-interpolator( var f = function(b){ return Math.random()*0.0588*b; }; module.exports = { result: f(global['centro-comercial-02'].totalActivePower) }; )",
               "metadata": [
                  {
                     "name": "dateUpdated",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "TimeInstant",
                     "type": "DateTime",
                     "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})"
                  },
                  {
                     "name": "uom",
                     "type": "Text",
                     "value": "kVArh"
                  }
               ]
            },
            {
               "name": "powerState_general",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.525877953687136, -3.657102781928411); var ret = 0; if('${{centro-comercial-02:#:ht_6}{lastCommand}}' === 'GENERAL' || '${{centro-comercial-02:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{centro-comercial-02:#:ht_6}{lastCommand}}' !== 'OFF' && (now < ts.sunrise || now > ts.sunset))) { ret = 1; } return ret; }; module.exports = f();)",
               "type": "Number"
            },
            {
               "name": "powerState_reduced",
               "value": "attribute-function-interpolator(var f = function() { var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.525877953687136, -3.657102781928411); var hour = now.getUTCHours(); var ret = 0; if('${{centro-comercial-02:#:ht_6}{lastCommand}}' === 'REDUCIDA' || ('${{centro-comercial-02:#:ht_6}{lastCommand}}' !== 'OFF' && '${{centro-comercial-02:#:ht_6}{lastCommand}}' !== 'GENERAL' && (hour >= 22 || hour <= 4))) { ret = 1; } return ret; }; module.exports = { result: f() };)",
               "type": "Number"
            },
            {
               "name": "timeInstant",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "once",
               "name": "lastCommand",
               "value": "STARTUP",
               "type": "Text"
            },
            {
               "schedule": "once",
               "name": "lastCommandTimestamp",
               "value": "date-increment-interpolator({\"origin\": \"now\", \"increment\": 0})",
               "type": "DateTime"
            },
            {
               "schedule": "8 */10 * * * *",
               "name": "lastCommand",
               "value": "attribute-function-interpolator(var f = function(){ var now = new SimulationDate(); var ts = require('suncalc').getTimes(now, 40.525877953687136, -3.657102781928411); var lastCommandTimestamp = new Date('${{centro-comercial-02:#:ht_6}{lastCommandTimestamp}}'); var ret = '${{centro-comercial-02:#:ht_6}{lastCommand}}'; if (ret === 'GENERAL') { if ((lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && ((lastCommandTimestamp.getUTCHours() < 22 && now >= ts.sunset) || (lastCommandTimestamp.getUTCHours() >= 22 && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.525877953687136, -3.657102781928411).sunrise)))) { ret = ''; } } else if (ret === 'REDUCIDA') { if ((lastCommandTimestamp.getUTCHours() <= 4 && now.getUTCHours() > 4) || (lastCommandTimestamp.getUTCHours() > 4 && lastCommandTimestamp <= ts.sunrise && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunrise && lastCommandTimestamp <= ts.sunset && now >= ts.sunset) || (lastCommandTimestamp >= ts.sunset && now.getUTCHours() >= 22)) { ret = ''; } } else if (ret === 'OFF') { if ((lastCommandTimestamp <= ts.sunset && now >= ts.sunrise) || (lastCommandTimestamp >= ts.sunset && now >= require('suncalc').getTimes(new Date(lastCommandTimestamp.getTime() + 24 * 60 * 60 * 1000), 40.525877953687136, -3.657102781928411).sunrise)) { ret = ''; } } return ret; }; module.exports = f();)",
               "type": "Text"
            }
         ],
         "staticAttributes": [
            {
               "name": "position",
               "value": {
                  "type": "Point",
                  "coordinates": [
                     -3.657102781928411,
                     40.525877953687136
                  ]
               },
               "type": "geo:json"
            },
            {
               "name": "customerId",
               "type": "Text",
               "value": "187"
            },
            {
               "name": "premisesId",
               "type": "Text",
               "value": "303"
            },
            {
               "name": "groupId",
               "type": "Text",
               "value": "154"
            },
            {
               "name": "deviceType",
               "type": "Text",
               "value": "CAP_U_Cuadro%20Alumbrado%20Publico"
            },
            {
               "name": "energyType",
               "type": "Text",
               "value": "ElÃ©ctrica"
            },
            {
               "name": "energyUse",
               "type": "Text",
               "value": "General"
            }
         ]
      }
   ],
   "globals": {
      "begonia-01": {
         "totalActivePower": 0
      },
      "camino-nuevo-01": {
         "totalActivePower": 0
      },
      "azalea-01": {
         "totalActivePower": 0
      },
      "golf-park-01": {
         "totalActivePower": 0
      },
      "europa-01": {
         "totalActivePower": 0
      },
      "francisco-chico-mendes-01": {
         "totalActivePower": 0
      },
      "dt-01": {
         "totalActivePower": 0
      },
      "industria-01": {
         "totalActivePower": 0
      },
      "la-granja-01": {
         "totalActivePower": 0
      },
      "sepulveda-01": {
         "totalActivePower": 0
      },
      "calendula-01": {
         "totalActivePower": 0
      },
      "centro-comercial-01": {
         "totalActivePower": 0
      },
      "europa-02": {
         "totalActivePower": 0
      },
      "parques-01": {
         "totalActivePower": 0
      },
      "conde-de-gaitanes-01": {
         "totalActivePower": 0
      },
      "aragoneses-01": {
         "totalActivePower": 0
      },
      "cuestablanca-01": {
         "totalActivePower": 0
      },
      "azalea-02": {
         "totalActivePower": 0
      },
      "ligonde-01": {
         "totalActivePower": 0
      },
      "cebreiro-01": {
         "totalActivePower": 0
      },
      "tierra-de-melide-01": {
         "totalActivePower": 0
      },
      "maria-tubau": {
         "totalActivePower": 0
      },
      "dt-02": {
         "totalActivePower": 0
      },
      "camino-del-cura-01": {
         "totalActivePower": 0
      },
      "centro-comercial-02": {
         "totalActivePower": 0
      }
   },
   "require": [
      "suncalc"
   ]
}
